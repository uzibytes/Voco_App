!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).firebase=t()}(this,function(){"use strict";var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(e,t)};var f=function(){return(f=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function p(e,o,s,c){return new(s=s||Promise)(function(r,t){function n(e){try{a(c.next(e))}catch(e){t(e)}}function i(e){try{a(c.throw(e))}catch(e){t(e)}}function a(e){var t;e.done?r(e.value):((t=e.value)instanceof s?t:new s(function(e){e(t)})).then(n,i)}a((c=c.apply(e,o||[])).next())})}function h(r,n){var i,a,o,s={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},e={next:t(0),throw:t(1),return:t(2)};return"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(i)throw new TypeError("Generator is already executing.");for(;s;)try{if(i=1,a&&(o=2&t[0]?a.return:t[0]?a.throw||((o=a.return)&&o.call(a),0):a.next)&&!(o=o.call(a,t[1])).done)return o;switch(a=0,(t=o?[2&t[0],o.value]:t)[0]){case 0:case 1:o=t;break;case 4:return s.label++,{value:t[1],done:!1};case 5:s.label++,a=t[1],t=[0];continue;case 7:t=s.ops.pop(),s.trys.pop();continue;default:if(!(o=0<(o=s.trys).length&&o[o.length-1])&&(6===t[0]||2===t[0])){s=0;continue}if(3===t[0]&&(!o||t[1]>o[0]&&t[1]<o[3])){s.label=t[1];break}if(6===t[0]&&s.label<o[1]){s.label=o[1],o=t;break}if(o&&s.label<o[2]){s.label=o[2],s.ops.push(t);break}o[2]&&s.ops.pop(),s.trys.pop();continue}t=n.call(r,s)}catch(e){t=[6,e],a=0}finally{i=o=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}}function d(e){var t="function"==typeof Symbol&&Symbol.iterator,r=t&&e[t],n=0;if(r)return r.call(e);if(e&&"number"==typeof e.length)return{next:function(){return{value:(e=e&&n>=e.length?void 0:e)&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function v(e,t){var r="function"==typeof Symbol&&e[Symbol.iterator];if(!r)return e;var n,i,a=r.call(e),o=[];try{for(;(void 0===t||0<t--)&&!(n=a.next()).done;)o.push(n.value)}catch(e){i={error:e}}finally{try{n&&!n.done&&(r=a.return)&&r.call(a)}finally{if(i)throw i.error}}return o}function o(e,t,r){if(r||2===arguments.length)for(var n,i=0,a=t.length;i<a;i++)!n&&i in t||((n=n||Array.prototype.slice.call(t,0,i))[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))}var r=function(e){for(var t=[],r=0,n=0;n<e.length;n++){var i=e.charCodeAt(n);i<128?t[r++]=i:(i<2048?t[r++]=i>>6|192:(55296==(64512&i)&&n+1<e.length&&56320==(64512&e.charCodeAt(n+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++n)),t[r++]=i>>18|240,t[r++]=i>>12&63|128):t[r++]=i>>12|224,t[r++]=i>>6&63|128),t[r++]=63&i|128)}return t},i={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray:function(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();for(var r=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,n=[],i=0;i<e.length;i+=3){var a=e[i],o=i+1<e.length,s=o?e[i+1]:0,c=i+2<e.length,u=c?e[i+2]:0,l=(15&s)<<2|u>>6,u=63&u;c||(u=64,o||(l=64)),n.push(r[a>>2],r[(3&a)<<4|s>>4],r[l],r[u])}return n.join("")},encodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(r(e),t)},decodeString:function(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){for(var t=[],r=0,n=0;r<e.length;){var i,a,o,s=e[r++];s<128?t[n++]=String.fromCharCode(s):191<s&&s<224?(a=e[r++],t[n++]=String.fromCharCode((31&s)<<6|63&a)):239<s&&s<365?(i=((7&s)<<18|(63&(a=e[r++]))<<12|(63&(o=e[r++]))<<6|63&e[r++])-65536,t[n++]=String.fromCharCode(55296+(i>>10)),t[n++]=String.fromCharCode(56320+(1023&i))):(a=e[r++],o=e[r++],t[n++]=String.fromCharCode((15&s)<<12|(63&a)<<6|63&o))}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray:function(e,t){this.init_();for(var r=t?this.charToByteMapWebSafe_:this.charToByteMap_,n=[],i=0;i<e.length;){var a=r[e.charAt(i++)],o=i<e.length?r[e.charAt(i)]:0,s=++i<e.length?r[e.charAt(i)]:64,c=++i<e.length?r[e.charAt(i)]:64;if(++i,null==a||null==o||null==s||null==c)throw Error();n.push(a<<2|o>>4),64!==s&&(n.push(o<<4&240|s>>2),64!==c&&n.push(s<<6&192|c))}return n},init_:function(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(var e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),(this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e)>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}},a=function(e){return t=r(e),i.encodeByteArray(t,!0).replace(/\./g,"");var t};function c(e,t){if(!(t instanceof Object))return t;switch(t.constructor){case Date:return new Date(t.getTime());case Object:void 0===e&&(e={});break;case Array:e=[];break;default:return t}for(var r in t)t.hasOwnProperty(r)&&"__proto__"!==r&&(e[r]=c(e[r],t[r]));return e}var s=(e.prototype.wrapCallback=function(r){var n=this;return function(e,t){e?n.reject(e):n.resolve(t),"function"==typeof r&&(n.promise.catch(function(){}),1===r.length?r(e):r(e,t))}},e);function e(){var r=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(e,t){r.resolve=e,r.reject=t})}function t(){return"object"==typeof indexedDB}function u(){return new Promise(function(e,t){try{var r=!0,n="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(n);i.onsuccess=function(){i.result.close(),r||self.indexedDB.deleteDatabase(n),e(!0)},i.onupgradeneeded=function(){r=!1},i.onerror=function(){var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(e){t(e)}})}var l,g=(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}(m,l=Error),m);function m(e,t,r){var n=l.call(this,t)||this;return n.code=e,n.customData=r,n.name="FirebaseError",Object.setPrototypeOf(n,m.prototype),Error.captureStackTrace&&Error.captureStackTrace(n,b.prototype.create),n}var b=(y.prototype.create=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];var n,i=t[0]||{},a=this.service+"/"+e,o=this.errors[e],o=o?(n=i,o.replace(_,function(e,t){var r=n[t];return null!=r?String(r):"<"+t+"?>"})):"Error",o=this.serviceName+": "+o+" ("+a+").";return new g(a,o,i)},y);function y(e,t,r){this.service=e,this.serviceName=t,this.errors=r}var _=/\{\$([^}]+)}/g;function w(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function E(e,t){if(e===t)return 1;for(var r=Object.keys(e),n=Object.keys(t),i=0,a=r;i<a.length;i++){var o=a[i];if(!n.includes(o))return;var s=e[o],c=t[o];if(I(s)&&I(c)){if(!E(s,c))return}else if(s!==c)return}for(var u=0,l=n;u<l.length;u++){o=l[u];if(!r.includes(o))return}return 1}function I(e){return null!==e&&"object"==typeof e}function S(e,t){var r=new C(e,t);return r.subscribe.bind(r)}var C=(T.prototype.next=function(t){this.forEachObserver(function(e){e.next(t)})},T.prototype.error=function(t){this.forEachObserver(function(e){e.error(t)}),this.close(t)},T.prototype.complete=function(){this.forEachObserver(function(e){e.complete()}),this.close()},T.prototype.subscribe=function(e,t,r){var n,i=this;if(void 0===e&&void 0===t&&void 0===r)throw new Error("Missing Observer.");void 0===(n=function(e,t){if("object"!=typeof e||null===e)return!1;for(var r=0,n=t;r<n.length;r++){var i=n[r];if(i in e&&"function"==typeof e[i])return!0}return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:r}).next&&(n.next=A),void 0===n.error&&(n.error=A),void 0===n.complete&&(n.complete=A);var a=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?n.error(i.finalError):n.complete()}catch(e){}}),this.observers.push(n),a},T.prototype.unsubscribeOne=function(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],--this.observerCount,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},T.prototype.forEachObserver=function(e){if(!this.finalized)for(var t=0;t<this.observers.length;t++)this.sendOne(t,e)},T.prototype.sendOne=function(e,t){var r=this;this.task.then(function(){if(void 0!==r.observers&&void 0!==r.observers[e])try{t(r.observers[e])}catch(e){"undefined"!=typeof console&&console.error&&console.error(e)}})},T.prototype.close=function(e){var t=this;this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(function(){t.observers=void 0,t.onNoObservers=void 0}))},T);function T(e,t){var r=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(function(){e(r)}).catch(function(e){r.error(e)})}function A(){}var O=(D.prototype.setInstantiationMode=function(e){return this.instantiationMode=e,this},D.prototype.setMultipleInstances=function(e){return this.multipleInstances=e,this},D.prototype.setServiceProps=function(e){return this.serviceProps=e,this},D.prototype.setInstanceCreatedCallback=function(e){return this.onInstanceCreated=e,this},D);function D(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}var N="[DEFAULT]",P=(k.prototype.get=function(e){var t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){var r=new s;if(this.instancesDeferred.set(t,r),this.isInitialized(t)||this.shouldAutoInitialize())try{var n=this.getOrInitializeService({instanceIdentifier:t});n&&r.resolve(n)}catch(e){}}return this.instancesDeferred.get(t).promise},k.prototype.getImmediate=function(e){var t=this.normalizeInstanceIdentifier(null==e?void 0:e.identifier),r=null!==(r=null==e?void 0:e.optional)&&void 0!==r&&r;if(!this.isInitialized(t)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service "+this.name+" is not available")}try{return this.getOrInitializeService({instanceIdentifier:t})}catch(e){if(r)return null;throw e}},k.prototype.getComponent=function(){return this.component},k.prototype.setComponent=function(e){var t,r;if(e.name!==this.name)throw Error("Mismatching Component "+e.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=e,this.shouldAutoInitialize()){if("EAGER"===e.instantiationMode)try{this.getOrInitializeService({instanceIdentifier:N})}catch(e){}try{for(var n=d(this.instancesDeferred.entries()),i=n.next();!i.done;i=n.next()){var a=v(i.value,2),o=a[0],s=a[1],c=this.normalizeInstanceIdentifier(o);try{var u=this.getOrInitializeService({instanceIdentifier:c});s.resolve(u)}catch(e){}}}catch(e){t={error:e}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(t)throw t.error}}}},k.prototype.clearInstance=function(e){this.instancesDeferred.delete(e=void 0===e?N:e),this.instancesOptions.delete(e),this.instances.delete(e)},k.prototype.delete=function(){return p(this,void 0,void 0,function(){var t;return h(this,function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(o(o([],v(t.filter(function(e){return"INTERNAL"in e}).map(function(e){return e.INTERNAL.delete()}))),v(t.filter(function(e){return"_delete"in e}).map(function(e){return e._delete()}))))];case 1:return e.sent(),[2]}})})},k.prototype.isComponentSet=function(){return null!=this.component},k.prototype.isInitialized=function(e){return this.instances.has(e=void 0===e?N:e)},k.prototype.getOptions=function(e){return this.instancesOptions.get(e=void 0===e?N:e)||{}},k.prototype.initialize=function(e){var t,r,n=(e=void 0===e?{}:e).options,n=void 0===n?{}:n,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(this.name+"("+i+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");var a=this.getOrInitializeService({instanceIdentifier:i,options:n});try{for(var o=d(this.instancesDeferred.entries()),s=o.next();!s.done;s=o.next()){var c=v(s.value,2),u=c[0],l=c[1];i===this.normalizeInstanceIdentifier(u)&&l.resolve(a)}}catch(e){t={error:e}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(t)throw t.error}}return a},k.prototype.onInit=function(e,t){var r=this.normalizeInstanceIdentifier(t),n=null!==(i=this.onInitCallbacks.get(r))&&void 0!==i?i:new Set;n.add(e),this.onInitCallbacks.set(r,n);var i=this.instances.get(r);return i&&e(i,r),function(){n.delete(e)}},k.prototype.invokeOnInitCallbacks=function(e,t){var r,n,i=this.onInitCallbacks.get(t);if(i)try{for(var a=d(i),o=a.next();!o.done;o=a.next()){var s=o.value;try{s(e,t)}catch(e){}}}catch(e){r={error:e}}finally{try{o&&!o.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}},k.prototype.getOrInitializeService=function(e){var t=e.instanceIdentifier,r=e.options,n=void 0===r?{}:r,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(e=t)===N?void 0:e,options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(e){}return r||null},k.prototype.normalizeInstanceIdentifier=function(e){return void 0===e&&(e=N),!this.component||this.component.multipleInstances?e:N},k.prototype.shouldAutoInitialize=function(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode},k);function k(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}var M=(L.prototype.addComponent=function(e){var t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component "+e.name+" has already been registered with "+this.name);t.setComponent(e)},L.prototype.addOrOverwriteComponent=function(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)},L.prototype.getProvider=function(e){if(this.providers.has(e))return this.providers.get(e);var t=new P(e,this);return this.providers.set(e,t),t},L.prototype.getProviders=function(){return Array.from(this.providers.values())},L);function L(e){this.name=e,this.providers=new Map}var B,R=[];(er=B=B||{})[er.DEBUG=0]="DEBUG",er[er.VERBOSE=1]="VERBOSE",er[er.INFO=2]="INFO",er[er.WARN=3]="WARN",er[er.ERROR=4]="ERROR",er[er.SILENT=5]="SILENT";function j(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];if(!(t<e.logLevel)){var i=(new Date).toISOString(),a=H[t];if(!a)throw new Error("Attempted to log a message with an invalid logType (value: "+t+")");console[a].apply(console,o(["["+i+"]  "+e.name+":"],r))}}var x,F={debug:B.DEBUG,verbose:B.VERBOSE,info:B.INFO,warn:B.WARN,error:B.ERROR,silent:B.SILENT},U=B.INFO,H=((Ye={})[B.DEBUG]="log",Ye[B.VERBOSE]="log",Ye[B.INFO]="info",Ye[B.WARN]="warn",Ye[B.ERROR]="error",Ye),z=(Object.defineProperty(V.prototype,"logLevel",{get:function(){return this._logLevel},set:function(e){if(!(e in B))throw new TypeError('Invalid value "'+e+'" assigned to `logLevel`');this._logLevel=e},enumerable:!1,configurable:!0}),V.prototype.setLogLevel=function(e){this._logLevel="string"==typeof e?F[e]:e},Object.defineProperty(V.prototype,"logHandler",{get:function(){return this._logHandler},set:function(e){if("function"!=typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e},enumerable:!1,configurable:!0}),Object.defineProperty(V.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(e){this._userLogHandler=e},enumerable:!1,configurable:!0}),V.prototype.debug=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,o([this,B.DEBUG],e)),this._logHandler.apply(this,o([this,B.DEBUG],e))},V.prototype.log=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,o([this,B.VERBOSE],e)),this._logHandler.apply(this,o([this,B.VERBOSE],e))},V.prototype.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,o([this,B.INFO],e)),this._logHandler.apply(this,o([this,B.INFO],e))},V.prototype.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,o([this,B.WARN],e)),this._logHandler.apply(this,o([this,B.WARN],e))},V.prototype.error=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._userLogHandler&&this._userLogHandler.apply(this,o([this,B.ERROR],e)),this._logHandler.apply(this,o([this,B.ERROR],e))},V);function V(e){this.name=e,this._logLevel=U,this._logHandler=j,this._userLogHandler=null,R.push(this)}function q(o,t){for(var e=0,r=R;e<r.length;e++)!function(e){var a=null;t&&t.level&&(a=F[t.level]),e.userLogHandler=null===o?null:function(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];var i=r.map(function(e){if(null==e)return null;if("string"==typeof e)return e;if("number"==typeof e||"boolean"==typeof e)return e.toString();if(e instanceof Error)return e.message;try{return JSON.stringify(e)}catch(e){return null}}).filter(function(e){return e}).join(" ");t>=(null!=a?a:e.logLevel)&&o({level:B[t].toLowerCase(),message:i,args:r,type:e.name})}}(r[e])}const W=(t,e)=>e.some(e=>t instanceof e);let $,K;const J=new WeakMap,G=new WeakMap,Y=new WeakMap,X=new WeakMap,Z=new WeakMap;let Q={get(e,t,r){if(e instanceof IDBTransaction){if("done"===t)return G.get(e);if("objectStoreNames"===t)return e.objectStoreNames||Y.get(e);if("store"===t)return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return re(e[t])},set(e,t,r){return e[t]=r,!0},has(e,t){return e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e}};function ee(n){return n!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(K=K||[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey]).includes(n)?function(...e){return n.apply(ne(this),e),re(J.get(this))}:function(...e){return re(n.apply(ne(this),e))}:function(e,...t){var r=n.call(ne(this),e,...t);return Y.set(r,e.sort?e.sort():[e]),re(r)}}function te(e){return"function"==typeof e?ee(e):(e instanceof IDBTransaction&&(a=e,G.has(a)||(t=new Promise((e,t)=>{const r=()=>{a.removeEventListener("complete",n),a.removeEventListener("error",i),a.removeEventListener("abort",i)},n=()=>{e(),r()},i=()=>{t(a.error||new DOMException("AbortError","AbortError")),r()};a.addEventListener("complete",n),a.addEventListener("error",i),a.addEventListener("abort",i)}),G.set(a,t))),W(e,$=$||[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])?new Proxy(e,Q):e);var a,t}function re(e){if(e instanceof IDBRequest)return function(a){const e=new Promise((e,t)=>{const r=()=>{a.removeEventListener("success",n),a.removeEventListener("error",i)},n=()=>{e(re(a.result)),r()},i=()=>{t(a.error),r()};a.addEventListener("success",n),a.addEventListener("error",i)});return e.then(e=>{e instanceof IDBCursor&&J.set(e,a)}).catch(()=>{}),Z.set(e,a),e}(e);if(X.has(e))return X.get(e);var t=te(e);return t!==e&&(X.set(e,t),Z.set(t,e)),t}const ne=e=>Z.get(e);function ie(e,t,{blocked:r,upgrade:n,blocking:i,terminated:a}={}){const o=indexedDB.open(e,t),s=re(o);return n&&o.addEventListener("upgradeneeded",e=>{n(re(o.result),e.oldVersion,e.newVersion,re(o.transaction))}),r&&o.addEventListener("blocked",()=>r()),s.then(e=>{a&&e.addEventListener("close",()=>a()),i&&e.addEventListener("versionchange",()=>i())}).catch(()=>{}),s}const ae=["get","getKey","getAll","getAllKeys","count"],oe=["put","add","delete","clear"],se=new Map;function ce(e,t){if(e instanceof IDBDatabase&&!(t in e)&&"string"==typeof t){if(se.get(t))return se.get(t);const i=t.replace(/FromIndex$/,""),a=t!==i,o=oe.includes(i);if(i in(a?IDBIndex:IDBObjectStore).prototype&&(o||ae.includes(i))){var r=async function(e,...t){var r=this.transaction(e,o?"readwrite":"readonly");let n=r.store;return a&&(n=n.index(t.shift())),(await Promise.all([n[i](...t),o&&r.done]))[0]};return se.set(t,r),r}}}Q={...x=Q,get:(e,t,r)=>ce(e,t)||x.get(e,t,r),has:(e,t)=>!!ce(e,t)||x.has(e,t)};var ue=(le.prototype.getPlatformInfoString=function(){return this.container.getProviders().map(function(e){if("VERSION"!==(null==(t=e.getComponent())?void 0:t.type))return null;var t,t=e.getImmediate();return t.library+"/"+t.version}).filter(function(e){return e}).join(" ")},le);function le(e){this.container=e}var fe="@firebase/app",pe=new z("@firebase/app"),he="[DEFAULT]",de=((we={})[fe]="fire-core",we["@firebase/app-compat"]="fire-core-compat",we["@firebase/analytics"]="fire-analytics",we["@firebase/analytics-compat"]="fire-analytics-compat",we["@firebase/app-check"]="fire-app-check",we["@firebase/app-check-compat"]="fire-app-check-compat",we["@firebase/auth"]="fire-auth",we["@firebase/auth-compat"]="fire-auth-compat",we["@firebase/database"]="fire-rtdb",we["@firebase/database-compat"]="fire-rtdb-compat",we["@firebase/functions"]="fire-fn",we["@firebase/functions-compat"]="fire-fn-compat",we["@firebase/installations"]="fire-iid",we["@firebase/installations-compat"]="fire-iid-compat",we["@firebase/messaging"]="fire-fcm",we["@firebase/messaging-compat"]="fire-fcm-compat",we["@firebase/performance"]="fire-perf",we["@firebase/performance-compat"]="fire-perf-compat",we["@firebase/remote-config"]="fire-rc",we["@firebase/remote-config-compat"]="fire-rc-compat",we["@firebase/storage"]="fire-gcs",we["@firebase/storage-compat"]="fire-gcs-compat",we["@firebase/firestore"]="fire-fst",we["@firebase/firestore-compat"]="fire-fst-compat",we["fire-js"]="fire-js",we.firebase="fire-js-all",we),ve=new Map,ge=new Map;function me(t,r){try{t.container.addComponent(r)}catch(e){pe.debug("Component "+r.name+" failed to register with FirebaseApp "+t.name,e)}}function be(e,t){e.container.addOrOverwriteComponent(t)}function ye(e){var t,r,n=e.name;if(ge.has(n))return pe.debug("There were multiple attempts to register component "+n+"."),!1;ge.set(n,e);try{for(var i=d(ve.values()),a=i.next();!a.done;a=i.next())me(a.value,e)}catch(e){t={error:e}}finally{try{a&&!a.done&&(r=i.return)&&r.call(i)}finally{if(t)throw t.error}}return!0}function _e(e,t){var r=e.container.getProvider("heartbeat").getImmediate({optional:!0});return r&&r.triggerHeartbeat(),e.container.getProvider(t)}var we=((Ye={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",Ye["bad-app-name"]="Illegal App name: '{$appName}",Ye["duplicate-app"]="Firebase App named '{$appName}' already exists with different options or config",Ye["app-deleted"]="Firebase App named '{$appName}' already deleted",Ye["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",Ye["invalid-log-argument"]="First argument to `onLog` must be null or a function.",Ye["idb-open"]="Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.",Ye["idb-get"]="Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.",Ye["idb-set"]="Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.",Ye["idb-delete"]="Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.",Ye),Ee=new b("app","Firebase",we),Ie=(Object.defineProperty(Se.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed(),this._automaticDataCollectionEnabled},set:function(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e},enumerable:!1,configurable:!0}),Object.defineProperty(Se.prototype,"name",{get:function(){return this.checkDestroyed(),this._name},enumerable:!1,configurable:!0}),Object.defineProperty(Se.prototype,"options",{get:function(){return this.checkDestroyed(),this._options},enumerable:!1,configurable:!0}),Object.defineProperty(Se.prototype,"config",{get:function(){return this.checkDestroyed(),this._config},enumerable:!1,configurable:!0}),Object.defineProperty(Se.prototype,"container",{get:function(){return this._container},enumerable:!1,configurable:!0}),Object.defineProperty(Se.prototype,"isDeleted",{get:function(){return this._isDeleted},set:function(e){this._isDeleted=e},enumerable:!1,configurable:!0}),Se.prototype.checkDestroyed=function(){if(this.isDeleted)throw Ee.create("app-deleted",{appName:this._name})},Se);function Se(e,t,r){var n=this;this._isDeleted=!1,this._options=f({},e),this._config=f({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new O("app",function(){return n},"PUBLIC"))}var Ce="9.9.3";function Te(e,t){var r,n,i=f({name:he,automaticDataCollectionEnabled:!1},t="object"!=typeof(t=void 0===t?{}:t)?{name:t}:t),a=i.name;if("string"!=typeof a||!a)throw Ee.create("bad-app-name",{appName:String(a)});var o=ve.get(a);if(o){if(E(e,o.options)&&E(i,o.config))return o;throw Ee.create("duplicate-app",{appName:a})}var s=new M(a);try{for(var c=d(ge.values()),u=c.next();!u.done;u=c.next()){var l=u.value;s.addComponent(l)}}catch(e){r={error:e}}finally{try{u&&!u.done&&(n=c.return)&&n.call(c)}finally{if(r)throw r.error}}i=new Ie(e,i,s);return ve.set(a,i),i}function Ae(r){return p(this,void 0,void 0,function(){var t;return h(this,function(e){switch(e.label){case 0:return(t=r.name,ve.has(t))?(ve.delete(t),[4,Promise.all(r.container.getProviders().map(function(e){return e.delete()}))]):[3,2];case 1:e.sent(),r.isDeleted=!0,e.label=2;case 2:return[2]}})})}function Oe(e,t,r){var n=null!==(o=de[e])&&void 0!==o?o:e;r&&(n+="-"+r);var i=n.match(/\s|\//),a=t.match(/\s|\//);if(i||a){var o=['Unable to register library "'+n+'" with version "'+t+'":'];return i&&o.push('library name "'+n+'" contains illegal characters (whitespace or "/")'),i&&a&&o.push("and"),a&&o.push('version name "'+t+'" contains illegal characters (whitespace or "/")'),void pe.warn(o.join(" "))}ye(new O(n+"-version",function(){return{library:n,version:t}},"VERSION"))}function De(e,t){if(null!==e&&"function"!=typeof e)throw Ee.create("invalid-log-argument");q(e,t)}function Ne(e){var t;t=e,R.forEach(function(e){e.setLogLevel(t)})}var Pe="firebase-heartbeat-database",ke=1,Me="firebase-heartbeat-store",Le=null;function Be(){return Le=Le||ie(Pe,ke,{upgrade:function(e,t){0===t&&e.createObjectStore(Me)}}).catch(function(e){throw Ee.create("idb-open",{originalErrorMessage:e.message})})}function Re(n,i){var a;return p(this,void 0,void 0,function(){var t,r;return h(this,function(e){switch(e.label){case 0:return e.trys.push([0,3,,4]),[4,Be()];case 1:return r=e.sent(),t=r.transaction(Me,"readwrite"),[4,t.objectStore(Me).put(i,je(n))];case 2:return e.sent(),[2,t.done];case 3:return(r=e.sent())instanceof g?pe.warn(r.message):(r=Ee.create("idb-set",{originalErrorMessage:null===(a=r)||void 0===a?void 0:a.message}),pe.warn(r.message)),[3,4];case 4:return[2]}})})}function je(e){return e.name+"!"+e.options.appId}var xe=(Fe.prototype.triggerHeartbeat=function(){return p(this,void 0,void 0,function(){var t,r,n;return h(this,function(e){switch(e.label){case 0:return(t=this.container.getProvider("platform-logger").getImmediate(),t=t.getPlatformInfoString(),r=Ue(),null!==this._heartbeatsCache)?[3,2]:[4,(n=this)._heartbeatsCachePromise];case 1:n._heartbeatsCache=e.sent(),e.label=2;case 2:return this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(function(e){return e.date===r})?[2]:(this._heartbeatsCache.heartbeats.push({date:r,agent:t}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(function(e){var t=new Date(e.date).valueOf();return Date.now()-t<=2592e6}),[2,this._storage.overwrite(this._heartbeatsCache)])}})})},Fe.prototype.getHeartbeatsHeader=function(){return p(this,void 0,void 0,function(){var t,r,n;return h(this,function(e){switch(e.label){case 0:return null!==this._heartbeatsCache?[3,2]:[4,this._heartbeatsCachePromise];case 1:e.sent(),e.label=2;case 2:return null===this._heartbeatsCache||0===this._heartbeatsCache.heartbeats.length?[2,""]:(t=Ue(),r=function(e,r){var t,n;void 0===r&&(r=1024);var i=[],a=e.slice();try{for(var o=d(e),s=o.next();!s.done;s=o.next())if("break"===function(t){var e=i.find(function(e){return e.agent===t.agent});if(e){if(e.dates.push(t.date),qe(i)>r)return e.dates.pop(),"break"}else if(i.push({agent:t.agent,dates:[t.date]}),qe(i)>r)return i.pop(),"break";a=a.slice(1)}(s.value))break}catch(e){t={error:e}}finally{try{s&&!s.done&&(n=o.return)&&n.call(o)}finally{if(t)throw t.error}}return{heartbeatsToSend:i,unsentEntries:a}}(this._heartbeatsCache.heartbeats),n=r.heartbeatsToSend,r=r.unsentEntries,n=a(JSON.stringify({version:2,heartbeats:n})),this._heartbeatsCache.lastSentHeartbeatDate=t,0<r.length?(this._heartbeatsCache.heartbeats=r,[4,this._storage.overwrite(this._heartbeatsCache)]):[3,4]);case 3:return e.sent(),[3,5];case 4:this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache),e.label=5;case 5:return[2,n]}})})},Fe);function Fe(e){var t=this;this.container=e,this._heartbeatsCache=null;var r=this.container.getProvider("app").getImmediate();this._storage=new ze(r),this._heartbeatsCachePromise=this._storage.read().then(function(e){return t._heartbeatsCache=e})}function Ue(){return(new Date).toISOString().substring(0,10)}var He,ze=(Ve.prototype.runIndexedDBEnvironmentCheck=function(){return p(this,void 0,void 0,function(){return h(this,function(e){return t()?[2,u().then(function(){return!0}).catch(function(){return!1})]:[2,!1]})})},Ve.prototype.read=function(){return p(this,void 0,void 0,function(){return h(this,function(e){switch(e.label){case 0:return[4,this._canUseIndexedDBPromise];case 1:return e.sent()?[3,2]:[2,{heartbeats:[]}];case 2:return[4,function(r){var n;return p(this,void 0,void 0,function(){var t;return h(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,3]),[4,Be()];case 1:return[2,e.sent().transaction(Me).objectStore(Me).get(je(r))];case 2:return(t=e.sent())instanceof g?pe.warn(t.message):(t=Ee.create("idb-get",{originalErrorMessage:null===(n=t)||void 0===n?void 0:n.message}),pe.warn(t.message)),[3,3];case 3:return[2]}})})}(this.app)];case 3:return[2,e.sent()||{heartbeats:[]}]}})})},Ve.prototype.overwrite=function(r){var n;return p(this,void 0,void 0,function(){var t;return h(this,function(e){switch(e.label){case 0:return[4,this._canUseIndexedDBPromise];case 1:return e.sent()?[3,2]:[2];case 2:return[4,this.read()];case 3:return t=e.sent(),[2,Re(this.app,{lastSentHeartbeatDate:null!==(n=r.lastSentHeartbeatDate)&&void 0!==n?n:t.lastSentHeartbeatDate,heartbeats:r.heartbeats})]}})})},Ve.prototype.add=function(r){var n;return p(this,void 0,void 0,function(){var t;return h(this,function(e){switch(e.label){case 0:return[4,this._canUseIndexedDBPromise];case 1:return e.sent()?[3,2]:[2];case 2:return[4,this.read()];case 3:return t=e.sent(),[2,Re(this.app,{lastSentHeartbeatDate:null!==(n=r.lastSentHeartbeatDate)&&void 0!==n?n:t.lastSentHeartbeatDate,heartbeats:o(o([],v(t.heartbeats)),v(r.heartbeats))})]}})})},Ve);function Ve(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}function qe(e){return a(JSON.stringify({version:2,heartbeats:e})).length}He="",ye(new O("platform-logger",function(e){return new ue(e)},"PRIVATE")),ye(new O("heartbeat",function(e){return new xe(e)},"PRIVATE")),Oe(fe,"0.7.31",He),Oe(fe,"0.7.31","esm5"),Oe("fire-js","");var We=Object.freeze({__proto__:null,SDK_VERSION:Ce,_DEFAULT_ENTRY_NAME:he,_addComponent:me,_addOrOverwriteComponent:be,_apps:ve,_clearComponents:function(){ge.clear()},_components:ge,_getProvider:_e,_registerComponent:ye,_removeServiceInstance:function(e,t,r){void 0===r&&(r=he),_e(e,t).clearInstance(r)},deleteApp:Ae,getApp:function(e){var t=ve.get(e=void 0===e?he:e);if(!t)throw Ee.create("no-app",{appName:e});return t},getApps:function(){return Array.from(ve.values())},initializeApp:Te,onLog:De,registerVersion:Oe,setLogLevel:Ne,FirebaseError:g}),$e=(Object.defineProperty(Ke.prototype,"automaticDataCollectionEnabled",{get:function(){return this._delegate.automaticDataCollectionEnabled},set:function(e){this._delegate.automaticDataCollectionEnabled=e},enumerable:!1,configurable:!0}),Object.defineProperty(Ke.prototype,"name",{get:function(){return this._delegate.name},enumerable:!1,configurable:!0}),Object.defineProperty(Ke.prototype,"options",{get:function(){return this._delegate.options},enumerable:!1,configurable:!0}),Ke.prototype.delete=function(){var t=this;return new Promise(function(e){t._delegate.checkDestroyed(),e()}).then(function(){return t.firebase.INTERNAL.removeApp(t.name),Ae(t._delegate)})},Ke.prototype._getService=function(e,t){var r;void 0===t&&(t=he),this._delegate.checkDestroyed();var n=this._delegate.container.getProvider(e);return n.isInitialized()||"EXPLICIT"!==(null===(r=n.getComponent())||void 0===r?void 0:r.instantiationMode)||n.initialize(),n.getImmediate({identifier:t})},Ke.prototype._removeServiceInstance=function(e,t){void 0===t&&(t=he),this._delegate.container.getProvider(e).clearInstance(t)},Ke.prototype._addComponent=function(e){me(this._delegate,e)},Ke.prototype._addOrOverwriteComponent=function(e){be(this._delegate,e)},Ke.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},Ke);function Ke(e,t){var r=this;this._delegate=e,this.firebase=t,me(e,new O("app-compat",function(){return r},"PUBLIC")),this.container=e.container}var we=((Ye={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",Ye["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",Ye),Je=new b("app-compat","Firebase",we);function Ge(i){var a={},o={__esModule:!0,initializeApp:function(e,t){void 0===t&&(t={});var r=Te(e,t);if(w(a,r.name))return a[r.name];var n=new i(r,o);return a[r.name]=n},app:s,registerVersion:Oe,setLogLevel:Ne,onLog:De,apps:null,SDK_VERSION:Ce,INTERNAL:{registerComponent:function(r){var n=r.name,t=n.replace("-compat","");{var e;ye(r)&&"PUBLIC"===r.type&&(e=function(e){if("function"!=typeof(e=void 0===e?s():e)[t])throw Je.create("invalid-app-argument",{appName:n});return e[t]()},void 0!==r.serviceProps&&c(e,r.serviceProps),o[t]=e,i.prototype[t]=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this._getService.bind(this,n).apply(this,r.multipleInstances?e:[])})}return"PUBLIC"===r.type?o[t]:null},removeApp:function(e){delete a[e]},useAsService:function(e,t){return"serverAuth"!==t?t:null},modularAPIs:We}};function s(e){if(!w(a,e=e||he))throw Je.create("no-app",{appName:e});return a[e]}return o.default=o,Object.defineProperty(o,"apps",{get:function(){return Object.keys(a).map(function(e){return a[e]})}}),s.App=i,o}var Ye=function e(){var t=Ge($e);return t.INTERNAL=f(f({},t.INTERNAL),{createFirebaseNamespace:e,extendNamespace:function(e){c(t,e)},createSubscribe:S,ErrorFactory:b,deepExtend:c}),t}(),we=new z("@firebase/app-compat");"object"==typeof self&&self.self===self&&void 0!==self.firebase&&(we.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  "),(Ze=self.firebase.SDK_VERSION)&&0<=Ze.indexOf("LITE")&&we.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    "));var Xe=Ye;Oe("@firebase/app-compat","0.1.32",void 0);Xe.registerVersion("firebase","9.9.3","app-compat");var Ze="@firebase/installations",we="0.5.12",Qe=1e4,et="w:"+we,tt="FIS_v2",rt="https://firebaseinstallations.googleapis.com/v1",nt=36e5,Ye=((Ye={})["missing-app-config-values"]='Missing App configuration value: "{$valueName}"',Ye["not-registered"]="Firebase Installation is not registered.",Ye["installation-not-found"]="Firebase Installation not found.",Ye["request-failed"]='{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',Ye["app-offline"]="Could not process request. Application offline.",Ye["delete-pending-registration"]="Can't delete installation while there is a pending registration request.",Ye),it=new b("installations","Installations",Ye);function at(e){return e instanceof g&&e.code.includes("request-failed")}function ot(e){var t=e.projectId;return rt+"/projects/"+t+"/installations"}function st(e){return{token:e.token,requestStatus:2,expiresIn:(e=e.expiresIn,Number(e.replace("s","000"))),creationTime:Date.now()}}function ct(r,n){return p(this,void 0,void 0,function(){var t;return h(this,function(e){switch(e.label){case 0:return[4,n.json()];case 1:return t=e.sent(),t=t.error,[2,it.create("request-failed",{requestName:r,serverCode:t.code,serverMessage:t.message,serverStatus:t.status})]}})})}function ut(e){var t=e.apiKey;return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":t})}function lt(e,t){var r=t.refreshToken,n=ut(e);return n.append("Authorization",tt+" "+r),n}function ft(r){return p(this,void 0,void 0,function(){var t;return h(this,function(e){switch(e.label){case 0:return[4,r()];case 1:return 500<=(t=e.sent()).status&&t.status<600?[2,r()]:[2,t]}})})}function pt(t){return new Promise(function(e){setTimeout(e,t)})}var ht=/^[cdef][\w-]{21}$/,dt="";function vt(){try{var e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(e),e[0]=112+e[0]%16;var t=function(e){return btoa(String.fromCharCode.apply(String,o([],v(e)))).replace(/\+/g,"-").replace(/\//g,"_")}(e).substr(0,22);return ht.test(t)?t:dt}catch(e){return dt}}function gt(e){return e.appName+"!"+e.appId}var mt=new Map;function bt(e,t){var r=gt(e);yt(r,t),function(e,t){var r=function(){!_t&&"BroadcastChannel"in self&&((_t=new BroadcastChannel("[Firebase] FID Change")).onmessage=function(e){yt(e.data.key,e.data.fid)});return _t}();r&&r.postMessage({key:e,fid:t});0===mt.size&&_t&&(_t.close(),_t=null)}(r,t)}function yt(e,t){var r,n,i=mt.get(e);if(i)try{for(var a=d(i),o=a.next();!o.done;o=a.next())(0,o.value)(t)}catch(e){r={error:e}}finally{try{o&&!o.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}}var _t=null;var wt="firebase-installations-store",Et=null;function It(){return Et=Et||ie("firebase-installations-database",1,{upgrade:function(e,t){0===t&&e.createObjectStore(wt)}})}function St(a,o){return p(this,void 0,void 0,function(){var t,r,n,i;return h(this,function(e){switch(e.label){case 0:return t=gt(a),[4,It()];case 1:return n=e.sent(),r=n.transaction(wt,"readwrite"),[4,(n=r.objectStore(wt)).get(t)];case 2:return i=e.sent(),[4,n.put(o,t)];case 3:return e.sent(),[4,r.done];case 4:return e.sent(),i&&i.fid===o.fid||bt(a,o.fid),[2,o]}})})}function Ct(n){return p(this,void 0,void 0,function(){var t,r;return h(this,function(e){switch(e.label){case 0:return t=gt(n),[4,It()];case 1:return r=e.sent(),[4,(r=r.transaction(wt,"readwrite")).objectStore(wt).delete(t)];case 2:return e.sent(),[4,r.done];case 3:return e.sent(),[2]}})})}function Tt(o,s){return p(this,void 0,void 0,function(){var t,r,n,i,a;return h(this,function(e){switch(e.label){case 0:return t=gt(o),[4,It()];case 1:return n=e.sent(),r=n.transaction(wt,"readwrite"),[4,(n=r.objectStore(wt)).get(t)];case 2:return i=e.sent(),void 0!==(a=s(i))?[3,4]:[4,n.delete(t)];case 3:return e.sent(),[3,6];case 4:return[4,n.put(a,t)];case 5:e.sent(),e.label=6;case 6:return[4,r.done];case 7:return e.sent(),!a||i&&i.fid===a.fid||bt(o,a.fid),[2,a]}})})}function At(i){return p(this,void 0,void 0,function(){var r,t,n;return h(this,function(e){switch(e.label){case 0:return[4,Tt(i.appConfig,function(e){var t=Dt(e||{fid:vt(),registrationStatus:0}),t=function(e,t){{if(0!==t.registrationStatus)return 1===t.registrationStatus?{installationEntry:t,registrationPromise:function(i){return p(this,void 0,void 0,function(){var t,r,n;return h(this,function(e){switch(e.label){case 0:return[4,Ot(i.appConfig)];case 1:t=e.sent(),e.label=2;case 2:return 1!==t.registrationStatus?[3,5]:[4,pt(100)];case 3:return e.sent(),[4,Ot(i.appConfig)];case 4:return t=e.sent(),[3,2];case 5:return 0!==t.registrationStatus?[3,7]:[4,At(i)];case 6:return n=e.sent(),r=n.installationEntry,(n=n.registrationPromise)?[2,n]:[2,r];case 7:return[2,t]}})})}(e)}:{installationEntry:t};if(!navigator.onLine){var r=Promise.reject(it.create("app-offline"));return{installationEntry:t,registrationPromise:r}}var n={fid:t.fid,registrationStatus:1,registrationTime:Date.now()},r=function(n,i){return p(this,void 0,void 0,function(){var t,r;return h(this,function(e){switch(e.label){case 0:return e.trys.push([0,2,,7]),[4,function(e,t){var s=e.appConfig,c=e.heartbeatServiceProvider,u=t.fid;return p(this,void 0,void 0,function(){var t,r,n,i,a,o;return h(this,function(e){switch(e.label){case 0:return t=ot(s),r=ut(s),(n=c.getImmediate({optional:!0}))?[4,n.getHeartbeatsHeader()]:[3,2];case 1:(n=e.sent())&&r.append("x-firebase-client",n),e.label=2;case 2:return o={fid:u,authVersion:tt,appId:s.appId,sdkVersion:et},i={method:"POST",headers:r,body:JSON.stringify(o)},[4,ft(function(){return fetch(t,i)})];case 3:return(a=e.sent()).ok?[4,a.json()]:[3,5];case 4:return o=e.sent(),[2,{fid:o.fid||u,registrationStatus:2,refreshToken:o.refreshToken,authToken:st(o.authToken)}];case 5:return[4,ct("Create Installation",a)];case 6:throw e.sent()}})})}(n,i)];case 1:return t=e.sent(),[2,St(n.appConfig,t)];case 2:return at(r=e.sent())&&409===r.customData.serverCode?[4,Ct(n.appConfig)]:[3,4];case 3:return e.sent(),[3,6];case 4:return[4,St(n.appConfig,{fid:i.fid,registrationStatus:0})];case 5:e.sent(),e.label=6;case 6:throw r;case 7:return[2]}})})}(e,n);return{installationEntry:n,registrationPromise:r}}}(i,t);return r=t.registrationPromise,t.installationEntry})];case 1:return(t=e.sent()).fid!==dt?[3,3]:(n={},[4,r]);case 2:return[2,(n.installationEntry=e.sent(),n)];case 3:return[2,{installationEntry:t,registrationPromise:r}]}})})}function Ot(e){return Tt(e,function(e){if(!e)throw it.create("installation-not-found");return Dt(e)})}function Dt(e){return 1===(t=e).registrationStatus&&t.registrationTime+Qe<Date.now()?{fid:e.fid,registrationStatus:0}:e;var t}function Nt(e,c){var u=e.appConfig,l=e.heartbeatServiceProvider;return p(this,void 0,void 0,function(){var r,n,i,a,o,s;return h(this,function(e){switch(e.label){case 0:return t=c.fid,r=ot(u)+"/"+t+"/authTokens:generate",n=lt(u,c),(i=l.getImmediate({optional:!0}))?[4,i.getHeartbeatsHeader()]:[3,2];case 1:(i=e.sent())&&n.append("x-firebase-client",i),e.label=2;case 2:return s={installation:{sdkVersion:et,appId:u.appId}},a={method:"POST",headers:n,body:JSON.stringify(s)},[4,ft(function(){return fetch(r,a)})];case 3:return(o=e.sent()).ok?[4,o.json()]:[3,5];case 4:return s=e.sent(),[2,st(s)];case 5:return[4,ct("Generate Auth Token",o)];case 6:throw e.sent()}var t})})}function Pt(i,a){return void 0===a&&(a=!1),p(this,void 0,void 0,function(){var n,t,r;return h(this,function(e){switch(e.label){case 0:return[4,Tt(i.appConfig,function(e){if(!Mt(e))throw it.create("not-registered");var t,r=e.authToken;if(a||2!==(t=r).requestStatus||function(e){var t=Date.now();return t<e.creationTime||e.creationTime+e.expiresIn<t+nt}(t)){if(1===r.requestStatus)return n=function(n,i){return p(this,void 0,void 0,function(){var t,r;return h(this,function(e){switch(e.label){case 0:return[4,kt(n.appConfig)];case 1:t=e.sent(),e.label=2;case 2:return 1!==t.authToken.requestStatus?[3,5]:[4,pt(100)];case 3:return e.sent(),[4,kt(n.appConfig)];case 4:return t=e.sent(),[3,2];case 5:return 0===(r=t.authToken).requestStatus?[2,Pt(n,i)]:[2,r]}})})}(i,a),e;if(!navigator.onLine)throw it.create("app-offline");r=(t=e,r={requestStatus:1,requestTime:Date.now()},f(f({},t),{authToken:r}));return n=function(i,a){return p(this,void 0,void 0,function(){var t,r,n;return h(this,function(e){switch(e.label){case 0:return e.trys.push([0,3,,8]),[4,Nt(i,a)];case 1:return t=e.sent(),n=f(f({},a),{authToken:t}),[4,St(i.appConfig,n)];case 2:return e.sent(),[2,t];case 3:return!at(r=e.sent())||401!==r.customData.serverCode&&404!==r.customData.serverCode?[3,5]:[4,Ct(i.appConfig)];case 4:return e.sent(),[3,7];case 5:return n=f(f({},a),{authToken:{requestStatus:0}}),[4,St(i.appConfig,n)];case 6:e.sent(),e.label=7;case 7:throw r;case 8:return[2]}})})}(i,r),r}return e})];case 1:return t=e.sent(),n?[4,n]:[3,3];case 2:return r=e.sent(),[3,4];case 3:r=t.authToken,e.label=4;case 4:return[2,r]}})})}function kt(e){return Tt(e,function(e){if(!Mt(e))throw it.create("not-registered");var t,r=e.authToken;return 1===(t=r).requestStatus&&t.requestTime+Qe<Date.now()?f(f({},e),{authToken:{requestStatus:0}}):e})}function Mt(e){return void 0!==e&&2===e.registrationStatus}function Lt(r,n){return void 0===n&&(n=!1),p(this,void 0,void 0,function(){var t;return h(this,function(e){switch(e.label){case 0:return[4,function(r){return p(this,void 0,void 0,function(){var t;return h(this,function(e){switch(e.label){case 0:return[4,At(r)];case 1:return(t=e.sent().registrationPromise)?[4,t]:[3,3];case 2:e.sent(),e.label=3;case 3:return[2]}})})}(t=r)];case 1:return e.sent(),[4,Pt(t,n)];case 2:return[2,e.sent().token]}})})}function Bt(e){return it.create("missing-app-config-values",{valueName:e})}function Rt(e){var t=_e(e.getProvider("app").getImmediate(),jt).getImmediate();return{getId:function(){return function(i){return p(this,void 0,void 0,function(){var t,r,n;return h(this,function(e){switch(e.label){case 0:return[4,At(t=i)];case 1:return r=e.sent(),n=r.installationEntry,(r.registrationPromise||Pt(t)).catch(console.error),[2,n.fid]}})})}(t)},getToken:function(e){return Lt(t,e)}}}var jt="installations";ye(new O(jt,function(e){var t=e.getProvider("app").getImmediate();return{app:t,appConfig:function(e){var t,r;if(!e||!e.options)throw Bt("App Configuration");if(!e.name)throw Bt("App Name");try{for(var n=d(["projectId","apiKey","appId"]),i=n.next();!i.done;i=n.next()){var a=i.value;if(!e.options[a])throw Bt(a)}}catch(e){t={error:e}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(t)throw t.error}}return{appName:e.name,projectId:e.options.projectId,apiKey:e.options.apiKey,appId:e.options.appId}}(t),heartbeatServiceProvider:_e(t,"heartbeat"),_delete:function(){return Promise.resolve()}}},"PUBLIC")),ye(new O("installations-internal",Rt,"PRIVATE")),Oe(Ze,we),Oe(Ze,we,"esm5");var xt,Ft,Ut="@firebase/performance",Ht="0.5.12",zt=Ht,Vt="FB-PERF-TRACE-MEASURE",qt="@firebase/performance/config",Wt="@firebase/performance/configexpire",Ze="Performance",we=((we={})["trace started"]="Trace {$traceName} was started before.",we["trace stopped"]="Trace {$traceName} is not running.",we["nonpositive trace startTime"]="Trace {$traceName} startTime should be positive.",we["nonpositive trace duration"]="Trace {$traceName} duration should be positive.",we["no window"]="Window is not available.",we["no app id"]="App id is not available.",we["no project id"]="Project id is not available.",we["no api key"]="Api key is not available.",we["invalid cc log"]="Attempted to queue invalid cc event",we["FB not default"]="Performance can only start when Firebase app instance is the default one.",we["RC response not ok"]="RC response is not ok",we["invalid attribute name"]="Attribute name {$attributeName} is invalid.",we["invalid attribute value"]="Attribute value {$attributeValue} is invalid.",we["invalid custom metric name"]="Custom metric name {$customMetricName} is invalid",we["invalid String merger input"]="Input for String merger is invalid, contact support team to resolve.",we["already initialized"]="initializePerformance() has already been called with different options. To avoid this error, call initializePerformance() with the same options as when it was originally called, or call getPerformance() to return the already initialized instance.",we),$t=new b("performance",Ze,we),Kt=new z(Ze);Kt.logLevel=B.INFO;var Jt,Gt,Yt=(Xt.prototype.getUrl=function(){return this.windowLocation.href.split("?")[0]},Xt.prototype.mark=function(e){this.performance&&this.performance.mark&&this.performance.mark(e)},Xt.prototype.measure=function(e,t,r){this.performance&&this.performance.measure&&this.performance.measure(e,t,r)},Xt.prototype.getEntriesByType=function(e){return this.performance&&this.performance.getEntriesByType?this.performance.getEntriesByType(e):[]},Xt.prototype.getEntriesByName=function(e){return this.performance&&this.performance.getEntriesByName?this.performance.getEntriesByName(e):[]},Xt.prototype.getTimeOrigin=function(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)},Xt.prototype.requiredApisAvailable=function(){return fetch&&Promise&&"undefined"!=typeof navigator&&navigator.cookieEnabled?!!t()||(Kt.info("IndexedDB is not supported by current browswer"),!1):(Kt.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled."),!1)},Xt.prototype.setupObserver=function(e,i){this.PerformanceObserver&&new this.PerformanceObserver(function(e){for(var t=0,r=e.getEntries();t<r.length;t++){var n=r[t];i(n)}}).observe({entryTypes:[e]})},Xt.getInstance=function(){return xt=void 0===xt?new Xt(Ft):xt},Xt);function Xt(e){if(!(this.window=e))throw $t.create("no window");this.performance=e.performance,this.PerformanceObserver=e.PerformanceObserver,this.windowLocation=e.location,this.navigator=e.navigator,this.document=e.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=e.localStorage),e.perfMetrics&&e.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=e.perfMetrics.onFirstInputDelay)}function Zt(e,t){var r=e.length-t.length;if(r<0||1<r)throw $t.create("invalid String merger input");for(var n=[],i=0;i<e.length;i++)n.push(e.charAt(i)),t.length>i&&n.push(t.charAt(i));return n.join("")}var Qt,er,tr=(rr.prototype.getFlTransportFullUrl=function(){return this.flTransportEndpointUrl.concat("?key=",this.transportKey)},rr.getInstance=function(){return Gt=void 0===Gt?new rr:Gt},rr);function rr(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.flTransportEndpointUrl=Zt("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),this.transportKey=Zt("AzSC8r6ReiGqFMyfvgow","Iayx0u-XT3vksVM-pIV"),this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}(er=Qt=Qt||{})[er.UNKNOWN=0]="UNKNOWN",er[er.VISIBLE=1]="VISIBLE",er[er.HIDDEN=2]="HIDDEN";var nr=["firebase_","google_","ga_"],ir=new RegExp("^[a-zA-Z]\\w*$");function ar(){switch(Yt.getInstance().document.visibilityState){case"visible":return Qt.VISIBLE;case"hidden":return Qt.HIDDEN;default:return Qt.UNKNOWN}}function or(e){var t=null===(t=e.options)||void 0===t?void 0:t.appId;if(!t)throw $t.create("no app id");return t}var sr="0.0.1",cr={loggingEnabled:!0},ur="FIREBASE_INSTALLATIONS_AUTH";function lr(e,t){var n,i,r=function(){var e=Yt.getInstance().localStorage;if(e){var t=e.getItem(Wt);if(t&&function(e){return Number(e)>Date.now()}(t)){e=e.getItem(qt);if(e)try{return JSON.parse(e)}catch(e){return}}}}();return r?(pr(r),Promise.resolve()):(i=t,function(e){var t=e.getToken();return t.then(function(e){}),t}((n=e).installations).then(function(e){var t=function(e){var t=null===(t=e.options)||void 0===t?void 0:t.projectId;if(!t)throw $t.create("no project id");return t}(n.app),r=function(e){var t=null===(t=e.options)||void 0===t?void 0:t.apiKey;if(!t)throw $t.create("no api key");return t}(n.app),r=new Request("https://firebaseremoteconfig.googleapis.com/v1/projects/"+t+"/namespaces/fireperf:fetch?key="+r,{method:"POST",headers:{Authorization:ur+" "+e},body:JSON.stringify({app_instance_id:i,app_instance_id_token:e,app_id:or(n.app),app_version:zt,sdk_version:sr})});return fetch(r).then(function(e){if(e.ok)return e.json();throw $t.create("RC response not ok")})}).catch(function(){Kt.info(fr)}).then(pr).then(function(e){var t;e=e,t=Yt.getInstance().localStorage,e&&t&&(t.setItem(qt,JSON.stringify(e)),t.setItem(Wt,String(Date.now()+60*tr.getInstance().configTimeToLive*60*1e3)))},function(){}))}var fr="Could not fetch config, will use default configs";function pr(e){if(!e)return e;var t=tr.getInstance(),r=e.entries||{};return void 0!==r.fpr_enabled?t.loggingEnabled="true"===String(r.fpr_enabled):t.loggingEnabled=cr.loggingEnabled,r.fpr_log_source?t.logSource=Number(r.fpr_log_source):cr.logSource&&(t.logSource=cr.logSource),r.fpr_log_endpoint_url?t.logEndPointUrl=r.fpr_log_endpoint_url:cr.logEndPointUrl&&(t.logEndPointUrl=cr.logEndPointUrl),r.fpr_log_transport_key?t.transportKey=r.fpr_log_transport_key:cr.transportKey&&(t.transportKey=cr.transportKey),void 0!==r.fpr_vc_network_request_sampling_rate?t.networkRequestsSamplingRate=Number(r.fpr_vc_network_request_sampling_rate):void 0!==cr.networkRequestsSamplingRate&&(t.networkRequestsSamplingRate=cr.networkRequestsSamplingRate),void 0!==r.fpr_vc_trace_sampling_rate?t.tracesSamplingRate=Number(r.fpr_vc_trace_sampling_rate):void 0!==cr.tracesSamplingRate&&(t.tracesSamplingRate=cr.tracesSamplingRate),t.logTraceAfterSampling=hr(t.tracesSamplingRate),t.logNetworkAfterSampling=hr(t.networkRequestsSamplingRate),e}function hr(e){return Math.random()<=e}var dr,vr=1;function gr(e){var r;return vr=2,dr=dr||(r=e,function(){var r=Yt.getInstance().document;return new Promise(function(e){var t;r&&"complete"!==r.readyState?(t=function(){"complete"===r.readyState&&(r.removeEventListener("readystatechange",t),e())},r.addEventListener("readystatechange",t)):e()})}().then(function(){return e=r.installations,(t=e.getId()).then(function(e){Jt=e}),t;var e,t}).then(function(e){return lr(r,e)}).then(mr,mr))}function mr(){vr=3}var br,yr=1e4,_r=3,wr=1e3,Er=_r,Ir=[],Sr=!1;function Cr(e){setTimeout(function(){var e,t;if(0!==Er)return Ir.length?(e=Ir.splice(0,wr),t=e.map(function(e){return{source_extension_json_proto3:e.message,event_time_ms:String(e.eventTime)}}),void function(e,n){return function(e){var t=tr.getInstance().getFlTransportFullUrl();return fetch(t,{method:"POST",body:JSON.stringify(e)})}(e).then(function(e){return e.ok||Kt.info("Call to Firebase backend failed."),e.json()}).then(function(e){var t=Number(e.nextRequestWaitMillis),r=yr;isNaN(t)||(r=Math.max(t,r));t=e.logResponseDetails;Array.isArray(t)&&0<t.length&&"RETRY_REQUEST_LATER"===t[0].responseAction&&(Ir=o(o([],n),Ir),Kt.info("Retry transport request later.")),Er=_r,Cr(r)})}({request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:tr.getInstance().logSource,log_event:t},e).catch(function(){Ir=o(o([],e),Ir),Er--,Kt.info("Tries left: "+Er+"."),Cr(yr)})):Cr(yr)},e)}function Tr(r){return function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];!function(e){if(!e.eventTime||!e.message)throw $t.create("invalid cc log");Ir=o(o([],Ir),[e])}({message:r.apply(void 0,e),eventTime:Date.now()})}}function Ar(e,t){(br=br||Tr(Nr))(e,t)}function Or(e){var t=tr.getInstance();!t.instrumentationEnabled&&e.isAuto||(t.dataCollectionEnabled||e.isAuto)&&Yt.getInstance().requiredApisAvailable()&&(e.isAuto&&ar()!==Qt.VISIBLE||(3===vr?Dr(e):gr(e.performanceController).then(function(){return Dr(e)},function(){return Dr(e)})))}function Dr(e){var t;!Jt||(t=tr.getInstance()).loggingEnabled&&t.logTraceAfterSampling&&setTimeout(function(){return Ar(e,1)},0)}function Nr(e,t){return 0===t?(r={url:e.url,http_method:e.httpMethod||0,http_response_code:200,response_payload_bytes:e.responsePayloadBytes,client_start_time_us:e.startTimeUs,time_to_response_initiated_us:e.timeToResponseInitiatedUs,time_to_response_completed_us:e.timeToResponseCompletedUs},r={application_info:Pr(e.performanceController.app),network_request_metric:r},JSON.stringify(r)):function(e){var t={name:e.name,is_auto:e.isAuto,client_start_time_us:e.startTimeUs,duration_us:e.durationUs};0!==Object.keys(e.counters).length&&(t.counters=e.counters);var r=e.getAttributes();0!==Object.keys(r).length&&(t.custom_attributes=r);t={application_info:Pr(e.performanceController.app),trace_metric:t};return JSON.stringify(t)}(e);var r}function Pr(e){return{google_app_id:or(e),app_instance_id:Jt,web_app_info:{sdk_version:zt,page_url:Yt.getInstance().getUrl(),service_worker_status:"serviceWorker"in(t=Yt.getInstance().navigator)?t.serviceWorker.controller?2:3:1,visibility_state:ar(),effective_connection_type:function(){var e=Yt.getInstance().navigator.connection;switch(e&&e.effectiveType){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}()},application_process_state:0};var t}var kr=["_fp","_fcp","_fid"];var Mr=(Lr.prototype.start=function(){if(1!==this.state)throw $t.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2},Lr.prototype.stop=function(){if(2!==this.state)throw $t.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),Or(this)},Lr.prototype.record=function(e,t,r){if(e<=0)throw $t.create("nonpositive trace startTime",{traceName:this.name});if(t<=0)throw $t.create("nonpositive trace duration",{traceName:this.name});if(this.durationUs=Math.floor(1e3*t),this.startTimeUs=Math.floor(1e3*e),r&&r.attributes&&(this.customAttributes=f({},r.attributes)),r&&r.metrics)for(var n=0,i=Object.keys(r.metrics);n<i.length;n++){var a=i[n];isNaN(Number(r.metrics[a]))||(this.counters[a]=Math.floor(Number(r.metrics[a])))}Or(this)},Lr.prototype.incrementMetric=function(e,t){void 0===t&&(t=1),void 0===this.counters[e]?this.putMetric(e,t):this.putMetric(e,this.counters[e]+t)},Lr.prototype.putMetric=function(e,t){if(n=e,i=this.name,0===n.length||100<n.length||!(i&&i.startsWith("_wt_")&&-1<kr.indexOf(n))&&n.startsWith("_"))throw $t.create("invalid custom metric name",{customMetricName:e});var r,n,i;this.counters[e]=(t=null!=t?t:0,(r=Math.floor(t))<t&&Kt.info("Metric value should be an Integer, setting the value as : "+r+"."),r)},Lr.prototype.getMetric=function(e){return this.counters[e]||0},Lr.prototype.putAttribute=function(e,t){var r,n,i=!(0===(r=e).length||40<r.length)&&(!nr.some(function(e){return r.startsWith(e)})&&!!r.match(ir)),a=0!==(n=t).length&&n.length<=100;if(i&&a)this.customAttributes[e]=t;else{if(!i)throw $t.create("invalid attribute name",{attributeName:e});if(!a)throw $t.create("invalid attribute value",{attributeValue:t})}},Lr.prototype.getAttribute=function(e){return this.customAttributes[e]},Lr.prototype.removeAttribute=function(e){void 0!==this.customAttributes[e]&&delete this.customAttributes[e]},Lr.prototype.getAttributes=function(){return f({},this.customAttributes)},Lr.prototype.setStartTime=function(e){this.startTimeUs=e},Lr.prototype.setDuration=function(e){this.durationUs=e},Lr.prototype.calculateTraceMetrics=function(){var e=this.api.getEntriesByName(this.traceMeasure),e=e&&e[0];e&&(this.durationUs=Math.floor(1e3*e.duration),this.startTimeUs=Math.floor(1e3*(e.startTime+this.api.getTimeOrigin())))},Lr.createOobTrace=function(e,t,r,n){var i,a=Yt.getInstance().getUrl();a&&(i=new Lr(e,"_wt_"+a,!0),a=Math.floor(1e3*Yt.getInstance().getTimeOrigin()),i.setStartTime(a),t&&t[0]&&(i.setDuration(Math.floor(1e3*t[0].duration)),i.putMetric("domInteractive",Math.floor(1e3*t[0].domInteractive)),i.putMetric("domContentLoadedEventEnd",Math.floor(1e3*t[0].domContentLoadedEventEnd)),i.putMetric("loadEventEnd",Math.floor(1e3*t[0].loadEventEnd))),r&&((a=r.find(function(e){return"first-paint"===e.name}))&&a.startTime&&i.putMetric("_fp",Math.floor(1e3*a.startTime)),(a=r.find(function(e){return"first-contentful-paint"===e.name}))&&a.startTime&&i.putMetric("_fcp",Math.floor(1e3*a.startTime)),n&&i.putMetric("_fid",Math.floor(1e3*n))),Or(i))},Lr.createUserTimingTrace=function(e,t){Or(new Lr(e,t,!1,t))},Lr);function Lr(e,t,r,n){void 0===r&&(r=!1),this.performanceController=e,this.name=t,this.isAuto=r,this.state=1,this.customAttributes={},this.counters={},this.api=Yt.getInstance(),this.randomId=Math.floor(1e6*Math.random()),this.isAuto||(this.traceStartMark="FB-PERF-TRACE-START-"+this.randomId+"-"+this.name,this.traceStopMark="FB-PERF-TRACE-STOP-"+this.randomId+"-"+this.name,this.traceMeasure=n||Vt+"-"+this.randomId+"-"+this.name,n&&this.calculateTraceMetrics())}function Br(e,t){var r,n,i,a,o=t;o&&void 0!==o.responseStart&&(i=Yt.getInstance().getTimeOrigin(),a=Math.floor(1e3*(o.startTime+i)),n=o.responseStart?Math.floor(1e3*(o.responseStart-o.startTime)):void 0,i=Math.floor(1e3*(o.responseEnd-o.startTime)),o={performanceController:e,url:o.name&&o.name.split("?")[0],responsePayloadBytes:o.transferSize,startTimeUs:a,timeToResponseInitiatedUs:n,timeToResponseCompletedUs:i},r=o,(a=tr.getInstance()).instrumentationEnabled&&(n=r.url,i=a.logEndPointUrl.split("?")[0],o=a.flTransportEndpointUrl.split("?")[0],n!==i&&n!==o&&a.loggingEnabled&&a.logNetworkAfterSampling&&setTimeout(function(){return Ar(r,0)},0)))}var Rr=5e3;function jr(e){Jt&&(setTimeout(function(){return function(t){var e=Yt.getInstance(),r=e.getEntriesByType("navigation"),n=e.getEntriesByType("paint");{var i;e.onFirstInputDelay?(i=setTimeout(function(){Mr.createOobTrace(t,r,n),i=void 0},Rr),e.onFirstInputDelay(function(e){i&&(clearTimeout(i),Mr.createOobTrace(t,r,n,e))})):Mr.createOobTrace(t,r,n)}}(e)},0),setTimeout(function(){return function(t){for(var e=Yt.getInstance(),r=e.getEntriesByType("resource"),n=0,i=r;n<i.length;n++){var a=i[n];Br(t,a)}e.setupObserver("resource",function(e){return Br(t,e)})}(e)},0),setTimeout(function(){return function(t){for(var e=Yt.getInstance(),r=e.getEntriesByType("measure"),n=0,i=r;n<i.length;n++){var a=i[n];xr(t,a)}e.setupObserver("measure",function(e){return xr(t,e)})}(e)},0))}function xr(e,t){var r=t.name;r.substring(0,Vt.length)!==Vt&&Mr.createUserTimingTrace(e,r)}var Fr=(Ur.prototype._init=function(e){var t=this;this.initialized||(void 0!==(null==e?void 0:e.dataCollectionEnabled)&&(this.dataCollectionEnabled=e.dataCollectionEnabled),void 0!==(null==e?void 0:e.instrumentationEnabled)&&(this.instrumentationEnabled=e.instrumentationEnabled),Yt.getInstance().requiredApisAvailable()?u().then(function(e){e&&(Sr||(Cr(5500),Sr=!0),gr(t).then(function(){return jr(t)},function(){return jr(t)}),t.initialized=!0)}).catch(function(e){Kt.info("Environment doesn't support IndexedDB: "+e)}):Kt.info('Firebase Performance cannot start if the browser does not support "Fetch" and "Promise", or cookies are disabled.'))},Object.defineProperty(Ur.prototype,"instrumentationEnabled",{get:function(){return tr.getInstance().instrumentationEnabled},set:function(e){tr.getInstance().instrumentationEnabled=e},enumerable:!1,configurable:!0}),Object.defineProperty(Ur.prototype,"dataCollectionEnabled",{get:function(){return tr.getInstance().dataCollectionEnabled},set:function(e){tr.getInstance().dataCollectionEnabled=e},enumerable:!1,configurable:!0}),Ur);function Ur(e,t){this.app=e,this.installations=t,this.initialized=!1}var Hr="[DEFAULT]";ye(new O("performance",function(e,t){var r=t.options,n=e.getProvider("app").getImmediate(),i=e.getProvider("installations-internal").getImmediate();if(n.name!==Hr)throw $t.create("FB not default");if("undefined"==typeof window)throw $t.create("no window");Ft=window;i=new Fr(n,i);return i._init(r),i},"PUBLIC")),Oe(Ut,Ht),Oe(Ut,Ht,"esm5");var zr=(Object.defineProperty(Vr.prototype,"instrumentationEnabled",{get:function(){return this._delegate.instrumentationEnabled},set:function(e){this._delegate.instrumentationEnabled=e},enumerable:!1,configurable:!0}),Object.defineProperty(Vr.prototype,"dataCollectionEnabled",{get:function(){return this._delegate.dataCollectionEnabled},set:function(e){this._delegate.dataCollectionEnabled=e},enumerable:!1,configurable:!0}),Vr.prototype.trace=function(e){return t=this._delegate,t=(r=t)&&r._delegate?r._delegate:r,new Mr(t,e);var t,r},Vr);function Vr(e,t){this.app=e,this._delegate=t}var qr;function Wr(e){var t=e.getProvider("app-compat").getImmediate(),r=e.getProvider("performance").getImmediate();return new zr(t,r)}(qr=Xe).INTERNAL.registerComponent(new O("performance-compat",Wr,"PUBLIC")),qr.registerVersion("@firebase/performance-compat","0.1.12");return Xe.registerVersion("firebase","9.9.3","compat-lite"),Xe});
//# sourceMappingURL=firebase-performance-standalone-compat.js.map
